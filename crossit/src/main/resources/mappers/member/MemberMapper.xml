<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.crossit.dao.MemberDao">

<sql id="memberColums">
		
		id,
		email,
		password,
		nickname,
		role,
		career,
		belonging,
		profile_img,
		introduction,
		portfolio,
		register_date
	</sql>

	<insert id="signUp" parameterType="Member">
		INSERT INTO member (
			<include refid="memberColums" />
		) VALUES (
			  #{id}
			, #{email}
			, #{password}
			, #{nickname}
			, #{role}
			, 0
			, 0
			, ''
			, ''
			, ''
			, NOW()
		)
	</insert>
	
	<select id="findMemberById" parameterType="long" resultType="int">
		SELECT
			count(*)
		FROM
			member
		WHERE
			id = ${id}
	</select>
	
	<select id="findMemberByEmail" parameterType="String" resultType="int">
		SELECT
			count(*)
		FROM
			member
		WHERE
			email = '${email}'
	</select>
	
	<select id="signIn" parameterType="String" resultType="int">
		SELECT
			count(*)
		FROM
			member
		WHERE
			email = '${email}'
		AND
			password = '${password}'
	</select>
	
	
	
<!-- 	<select id="findMemberByEmail" parameterType="String" resultType="int">
		SELECT
			count(*)
		FROM
			member
		WHERE
			email = '${email}'
		AND
			password = '${password}';
	</select> -->

	<!-- <select id="selectBoardDetail" parameterType="long" resultType="BoardDTO">
		SELECT
			<include refid="boardColumns" />
		FROM
			tb_board
		WHERE
			delete_yn = 'N'
		AND
			idx = #{idx}
	</select>

	<update id="updateBoard" parameterType="BoardDTO">
		UPDATE tb_board
		SET
			  update_time = NOW()
			, title = #{title}
			, content = #{content}
			, writer = #{writer}
			, notice_yn = IFNULL(#{noticeYn}, 'N')
			, secret_yn = IFNULL(#{secretYn}, 'N')
		WHERE
			idx = #{idx}
	</update>

	<update id="deleteBoard" parameterType="long">
		UPDATE tb_board
		SET
			  delete_yn = 'Y'
			, delete_time = NOW()
		WHERE
			idx = #{idx}
	</update>

	<select id="selectBoardList" parameterType="BoardDTO" resultType="BoardDTO">
		SELECT
			<include refid="boardColumns" />
		FROM
			tb_board
		WHERE
			delete_yn = 'N'
		ORDER BY
			notice_yn ASC,
			idx DESC,
			insert_time DESC
	</select>

	<select id="selectBoardTotalCount" parameterType="BoardDTO" resultType="int">
		SELECT
			COUNT(*)
		FROM
			tb_board
		WHERE
			delete_yn = 'N'
	</select>
 -->

</mapper>